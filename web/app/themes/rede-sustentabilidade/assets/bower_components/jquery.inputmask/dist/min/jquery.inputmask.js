/*
 Input Mask plugin for jquery
 http://github.com/RobinHerbots/jquery.inputmask
 Copyright (c) 2010 - 2013 Robin Herbots
 Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 Version: 2.3.0
*/
(function(b){void 0==b.fn.inputmask&&(b.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},escapeChar:"\\",mask:null,oncomplete:b.noop,onincomplete:b.noop,oncleared:b.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:b.noop,onKeyDown:b.noop,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:b.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,
definitions:{9:{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451]",cardinality:1},"*":{validator:"[A-Za-z\u0410-\u044f\u0401\u04510-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,
RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(b,E,F,J){var G=b.length;E||("*"==F?G=J.length+1:1<F&&(G+=b.length*(F-1)));return G}},val:b.fn.val,escapeRegex:function(b){return b.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")}},b.fn.inputmask=function(D,E){function F(d,e){var a=c.aliases[d];return a?(a.alias&&F(a.alias),b.extend(!0,
c,a),b.extend(!0,c,e),!0):!1}function J(d){var e=!1,a=0,k=c.greedy,h=c.repeat;"*"==h&&(k=!1);1==d.length&&!1==k&&(c.placeholder="");for(var d=b.map(d.split(""),function(b){var m=[];if(b==c.escapeChar)e=true;else if(b!=c.optionalmarker.start&&b!=c.optionalmarker.end||e){var h=c.definitions[b];if(h&&!e)for(b=0;b<h.cardinality;b++)m.push(A(a+b));else{m.push(b);e=false}a=a+m.length;return m}}),m=d.slice(),l=1;l<h&&k;l++)m=m.concat(d.slice());return{mask:m,repeat:h,greedy:k}}function G(d){var e=!1,a=!1,
k=!1;return b.map(d.split(""),function(b){var m=[];if(b==c.escapeChar)a=!0;else if(b==c.optionalmarker.start&&!a)k=e=!0;else if(b==c.optionalmarker.end&&!a)e=!1,k=!0;else{var d=c.definitions[b];if(d&&!a){for(var q=d.prevalidator,p=q?q.length:0,r=1;r<d.cardinality;r++){var j=p>=r?q[r-1]:[],n=j.validator,j=j.cardinality;m.push({fn:n?"string"==typeof n?RegExp(n):new function(){this.test=n}:/./,cardinality:j?j:1,optionality:e,newBlockMarker:!0==e?k:!1,offset:0,casing:d.casing,def:d.definitionSymbol|b});
!0==e&&(k=!1)}m.push({fn:d.validator?"string"==typeof d.validator?RegExp(d.validator):new function(){this.test=d.validator}:/./,cardinality:d.cardinality,optionality:e,newBlockMarker:k,offset:0,casing:d.casing,def:d.definitionSymbol|b})}else m.push({fn:null,cardinality:0,optionality:e,newBlockMarker:k,offset:0,casing:null,def:b}),a=!1;k=!1;return m}})}function M(){function d(a){var b=a.length;for(i=0;i<b&&a.charAt(i)!=c.optionalmarker.start;i++);var e=[a.substring(0,i)];i<b&&e.push(a.substring(i+
1,b));return e}function e(h,m){var l=0,q=0,p=m.length;for(i=0;i<p&&!(m.charAt(i)==c.optionalmarker.start&&l++,m.charAt(i)==c.optionalmarker.end&&q++,0<l&&l==q);i++);l=[m.substring(0,i)];i<p&&l.push(m.substring(i+1,p));var r=d(l[0]);if(1<r.length){if(p=h+r[0]+(c.optionalmarker.start+r[1]+c.optionalmarker.end)+(1<l.length?l[1]:""),-1==b.inArray(p,k)&&(k.push(p),q=J(p),a.push({mask:p,_buffer:q.mask,buffer:q.mask.slice(),tests:G(p),lastValidPosition:void 0,greedy:q.greedy,repeat:q.repeat})),p=h+r[0]+
(1<l.length?l[1]:""),-1==b.inArray(p,k)&&(k.push(p),q=J(p),a.push({mask:p,_buffer:q.mask,buffer:q.mask.slice(),tests:G(p),lastValidPosition:void 0,greedy:q.greedy,repeat:q.repeat})),1<d(r[1]).length&&e(h+r[0],r[1]+l[1]),1<l.length&&1<d(l[1]).length)e(h+r[0]+(c.optionalmarker.start+r[1]+c.optionalmarker.end),l[1]),e(h+r[0],l[1])}else p=h+l,-1==b.inArray(p,k)&&(k.push(p),q=J(p),a.push({mask:p,_buffer:q.mask,buffer:q.mask.slice(),tests:G(p),lastValidPosition:void 0,greedy:q.greedy,repeat:q.repeat}))}
var a=[],k=[];b.isArray(c.mask)?b.each(c.mask,function(a,c){e("",c.toString())}):e("",c.mask.toString());return a}function A(b){return c.placeholder.charAt(b%c.placeholder.length)}function H(d,e){function a(){return d[e]}function k(){return a().tests}function h(){return a()._buffer}function m(){return a().buffer}function l(g,O,u,h){function x(a,b){for(var g=r(a),e=O?1:0,d="",m=b.buffer,h=b.tests[g].cardinality;h>e;h--)d+=K(m,g-(h-1));O&&(d+=O);return null!=b.tests[g].fn?b.tests[g].fn.test(d,m,a,u,
c):!1}if(u=!0===u){var k=x(g,a());!0===k&&(k={pos:g});return k}var l=[],k=!1,q=e;b.each(d,function(a){e=a;if(q!=e&&!p(g)){if(O==this._buffer[g]||O==c.skipOptionalPartCharacter)return l.push({activeMasksetIndex:a,result:{refresh:!0,c:this._buffer[g]}}),this.lastValidPosition=g,!1;this.lastValidPosition=h?j()+1:-1}if((void 0==this.lastValidPosition&&g==(h?C(j()):n(-1))||h||c.numericInput?this.lastValidPosition<=c.numericInput?j():n(g):this.lastValidPosition>=C(g))&&0<=g&&g<j()){k=x(g,this);if(!1!==
k){!0===k&&(k={pos:g});var b=k.pos||g;if(void 0==this.lastValidPosition||(h?c.greedy?this.lastValidPosition>b:b==m().length-1:this.lastValidPosition<b))this.lastValidPosition=b}l.push({activeMasksetIndex:a,result:k})}});e=q;return l}function q(g){var O=e,u={activeMasksetIndex:0,lastValidPosition:g?j()+1:-1};b.each(d,function(a){if(void 0!=this.lastValidPosition&&(g||c.numericInput?this.lastValidPosition<u.lastValidPosition:this.lastValidPosition>u.lastValidPosition))u.activeMasksetIndex=a,u.lastValidPosition=
this.lastValidPosition});e=u.activeMasksetIndex;O!=e&&(g?F(m(),0,C(u.lastValidPosition)):F(m(),n(u.lastValidPosition),j()),a().writeOutBuffer=!0)}function p(a){a=r(a);a=k()[a];return void 0!=a?a.fn:!1}function r(a){return a%k().length}function j(){return c.getMaskLength(h(),a().greedy,a().repeat,m(),c)}function n(a){var b=j();if(a>=b)return b;for(;++a<b&&!p(a););return a}function C(a){if(0>=a)return 0;for(;0<--a&&!p(a););return a}function t(a,b,c,e,d){e&&(b=I(a,b,d));e=k()[r(b)];d=c;if(void 0!=d)switch(e.casing){case "upper":d=
c.toUpperCase();break;case "lower":d=c.toLowerCase()}a[b]=d}function K(a,b,c){c&&(b=I(a,b));return a[b]}function I(a,b,c){if(c)for(;0>b&&a.length<j();){c=h().length-1;for(b=h().length;void 0!==h()[c];)a.unshift(h()[c--])}else for(;void 0==a[b]&&a.length<j();)for(c=0;void 0!==h()[c];)a.push(h()[c++]);return b}function z(a,b,c){a._valueSet(b.join(""));void 0!=c&&B(a,c)}function F(a,b,c){for(var e=j();b<c&&b<e;b++)t(a,b,K(h().slice(),b,!0))}function D(a,b){var c=r(b);t(a,b,K(h(),c))}function G(g,m,k,
l){var x=b(g).data("_inputmask").isRTL,l=void 0!=l?l.slice():H(g._valueGet(),x).split("");b.each(d,function(a,b){b.buffer=b._buffer.slice();b.lastValidPosition=void 0;b.p=x?j():0});!0!==k&&(e=0);m&&g._valueSet("");x&&!c.numericInput&&(l=l.reverse());var q=j();b.each(l,function(e,d){var j=x?c.numericInput?q:q-e:e,l=a().lastValidPosition,n=a().p,n=void 0==l?j:n,l=void 0==l?-1:l;(k&&p(x?j-1:j)||(d!=K(h().slice(),x?j-1:j,!0)||p(x?j-1:j))&&-1==b.inArray(d,h().slice(l+1,n)))&&b(g).trigger("keypress",[!0,
d.charCodeAt(0),m,k,j,x])});!0===k&&(a().lastValidPosition=x?n(a().p):C(a().p))}function E(a){return b.inputmask.escapeRegex.call(this,a)}function H(a,b){return b?a.replace(RegExp("^("+E(h().join(""))+")*"),""):a.replace(RegExp("("+E(h().join(""))+")*$"),"")}function J(a){var c=m(),e=c.slice(),d,j;if(b(a).data("_inputmask").isRTL)for(j=0;j<=e.length-1;j++)if(d=r(j),k()[d].optionality)if(!p(j)||!l(j,c[j],!0))e.splice(0,1);else break;else break;else for(j=e.length-1;0<=j;j--)if(d=r(j),k()[d].optionality)if(!p(j)||
!l(j,c[j],!0))e.pop();else break;else break;z(a,e)}function M(a,c){return k()&&(!0===c||!a.hasClass("hasDatepicker"))?b.map(m(),function(a,b){return p(b)&&l(b,a,!0)?a:null}).join(""):a[0]._valueGet()}function B(a,e,d){var j=a.jquery&&0<a.length?a[0]:a;if("number"==typeof e)b(a).is(":visible")&&(d="number"==typeof d?d:e,!1==c.insertMode&&e==d&&d++,j.setSelectionRange?(j.selectionStart=e,j.selectionEnd=P?e:d):j.createTextRange&&(a=j.createTextRange(),a.collapse(!0),a.moveEnd("character",d),a.moveStart("character",
e),a.select()));else{if(!b(a).is(":visible"))return{begin:0,end:0};j.setSelectionRange?(e=j.selectionStart,d=j.selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),e=0-a.duplicate().moveStart("character",-1E5),d=e+a.text.length);return{begin:e,end:d}}}function Q(a){var c=!1,m=0,k=e;b.each(d,function(b,d){e=b;var k=C(j());if(void 0!=d.lastValidPosition&&d.lastValidPosition>=m&&d.lastValidPosition==k){for(var l=!0,n=0;n<=k;n++){var q=p(n),t=r(n);if(q&&
(void 0==a[n]||a[n]==A(n))||!q&&a[n]!=h()[t]){l=!1;break}}if(c=c||l)return!1}m=d.lastValidPosition});e=k;return c}this.unmaskedvalue=function(a,b){return M(a,b)};this.isComplete=function(a){return Q(a)};this.mask=function(g){function E(a){a=b._data(a).events;b.each(a,function(a,c){b.each(c,function(a,b){if("inputmask"==b.namespace){var c=b.handler;b.handler=function(a){if(this.readOnly||this.disabled)a.preventDefault;else return c.apply(this,arguments)}}})})}function u(a){var c;Object.getOwnPropertyDescriptor&&
(c=Object.getOwnPropertyDescriptor(a,"value"));if(c&&c.get)a._valueGet||(a._valueGet=c.get,a._valueSet=c.set,Object.defineProperty(a,"value",{get:function(){var a=b(this),c=b(this).data("_inputmask"),e=c.masksets,d=c.activeMasksetIndex;return c&&c.opts.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=e[d]._buffer.join("")?this._valueGet():""},set:function(a){this._valueSet(a);b(this).triggerHandler("setvalue.inputmask")}}));else if(document.__lookupGetter__&&a.__lookupGetter__("value"))a._valueGet||
(a._valueGet=a.__lookupGetter__("value"),a._valueSet=a.__lookupSetter__("value"),a.__defineGetter__("value",function(){var a=b(this),c=b(this).data("_inputmask"),e=c.masksets,d=c.activeMasksetIndex;return c&&c.opts.autoUnmask?a.inputmask("unmaskedvalue"):this._valueGet()!=e[d]._buffer.join("")?this._valueGet():""}),a.__defineSetter__("value",function(a){this._valueSet(a);b(this).triggerHandler("setvalue.inputmask")}));else if(a._valueGet||(a._valueGet=function(){return this.value},a._valueSet=function(a){this.value=
a}),!0!=b.fn.val.inputmaskpatch)b.fn.val=function(){if(arguments.length==0){var a=b(this);if(a.data("_inputmask")){if(a.data("_inputmask").opts.autoUnmask)return a.inputmask("unmaskedvalue");var a=b.inputmask.val.apply(a),c=b(this).data("_inputmask");return a!=c.masksets[c.activeMasksetIndex]._buffer.join("")?a:""}return b.inputmask.val.apply(a)}var e=arguments;return this.each(function(){var a=b(this),c=b.inputmask.val.apply(a,e);a.data("_inputmask")&&a.triggerHandler("setvalue.inputmask");return c})},
b.extend(b.fn.val,{inputmaskpatch:!0})}function M(a,b){if(c.numericInput&&""!=c.radixPoint&&!1===c.skipRadixDance){var e=a._valueGet().indexOf(c.radixPoint);o=b.begin<=e||b.end<=e||-1==e}}function x(c,b,e){for(var d=m();!p(c)&&0<=c-1;)c--;for(var f=c;f<b&&f<j();f++)if(p(f)){D(d,f);var g=n(f),q=K(d,g);if(q!=A(g))if(g<j()&&!1!==l(f,q,!0,o)&&k()[r(f)].def==k()[r(g)].def)t(d,f,K(d,g),!0,o),g<b&&D(d,g);else if(p(f))break}else D(d,f);void 0!=e&&t(d,o?b:C(b),e);if(!1==a().greedy){b=H(d.join(""),o).split("");
d.length=b.length;f=0;for(e=d.length;f<e;f++)d[f]=b[f];0==d.length&&(a().buffer=h().slice())}return c}function N(c,b,e,d){for(var f=m();c<=b&&c<j();c++)if(p(c)){var g=K(f,c,!0);t(f,c,e,!0,o);if(g!=A(c))if(e=n(c),e<j())if(!1!==l(e,g,!0,o)&&k()[r(c)].def==k()[r(e)].def)e=g;else if(p(e))break;else e=g;else break;else if(e=g,!0!==d)break}else D(f,c);d=f.length;if(!1==a().greedy){e=H(f.join(""),o).split("");f.length=e.length;c=0;for(g=f.length;c<g;c++)f[c]=e[c];0==f.length&&(a().buffer=h().slice())}return b-
(d-f.length)}function P(g){R=!1;var k=this,l=g.keyCode,s=B(k);M(k,s);if(l==c.keyCode.BACKSPACE||l==c.keyCode.DELETE||X&&127==l||g.ctrlKey&&88==l){g.preventDefault();var f=s.begin;if(0==s.begin&&s.end==j())F(m(),s.begin,s.end),b.each(d,function(a,c){c.buffer=c._buffer.slice();c.lastValidPosition=void 0;c.p=o?j():0});else if(1<s.end-s.begin||1==s.end-s.begin&&c.insertMode){F(m(),s.begin,s.end);var r=j();if(!1==c.greedy)o?N(0,s.end-1,A(s.end),!0):x(s.begin,r);else for(var t=s.begin;t<s.end;t++)p(t)&&
(o?N(0,s.end-1,A(s.end),!0):x(s.begin,r));G(k,!1,!0,m())}else b.each(d,function(b){e=b;f=U?s.end:s.begin;var b=m(),d=o?C(j()+1):n(-1),g=j();if(l==c.keyCode.DELETE){if(o?f>d:f<d)f=d;if(f<g&&(c.numericInput&&""!=c.radixPoint&&b[f]==c.radixPoint?(f=b.length-1==f?f:n(f),f=x(f,g)):o?(f=N(0,f,A(f),!0),f=n(f)):f=x(f,g),void 0!=a().lastValidPosition))-1!=a().lastValidPosition&&m()[a().lastValidPosition]==h()[a().lastValidPosition]&&(a().lastValidPosition=o?n(a().lastValidPosition):0==a().lastValidPosition?
-1:C(a().lastValidPosition)),(o?a().lastValidPosition>d:a().lastValidPosition<d)?(a().lastValidPosition=void 0,a().p=d):(a().writeOutBuffer=!0,a().p=f)}else if(l==c.keyCode.BACKSPACE)if(o?f<=d:f>d){if(f-=1,c.numericInput&&""!=c.radixPoint&&b[f]==c.radixPoint?(f=N(0,b.length-1==f?f:f-1,A(f),!0),f++):o?(f=N(0,f,A(f),!0),f=b[f+1]==c.radixPoint?f+1:n(f)):f=x(f,g),void 0!=a().lastValidPosition)-1!=a().lastValidPosition&&m()[a().lastValidPosition]==h()[a().lastValidPosition]&&(a().lastValidPosition=o?n(a().lastValidPosition):
0==a().lastValidPosition?-1:C(a().lastValidPosition)),(o?a().lastValidPosition>d:a().lastValidPosition<d)?(a().lastValidPosition=void 0,a().p=d):(a().writeOutBuffer=!0,a().p=f)}else 0<e&&(a().lastValidPosition=void 0,a().writeOutBuffer=!0,a().p=d,e=0,a().buffer=h().slice(),a().p=o?C(j()+1):n(-1),a().lastValidPosition=void 0)});q(o);z(k,m(),a().p);k._valueGet()==h().join("")&&b(k).trigger("cleared");c.showTooltip&&v.prop("title",a().mask)}else l==c.keyCode.END||l==c.keyCode.PAGE_DOWN?setTimeout(function(){var b=
o?a().lastValidPosition:n(a().lastValidPosition);!c.insertMode&&(b==j()&&!g.shiftKey)&&b--;B(k,g.shiftKey?s.begin:b,b)},0):l==c.keyCode.HOME&&!g.shiftKey||l==c.keyCode.PAGE_UP?B(k,0,g.shiftKey?s.begin:0):l==c.keyCode.ESCAPE?(k._valueSet(a().undoBuffer),G(k,!0,!0)):l==c.keyCode.INSERT&&!g.shiftKey&&!g.ctrlKey?(c.insertMode=!c.insertMode,B(k,!c.insertMode&&s.begin==j()?s.begin-1:s.begin)):!1==c.insertMode&&!g.shiftKey&&(l==c.keyCode.RIGHT?setTimeout(function(){var a=B(k);B(k,a.begin)},0):l==c.keyCode.LEFT&&
setTimeout(function(){var a=B(k);B(k,a.begin-1)},0));c.onKeyDown.call(this,g,m(),c);S=-1!=b.inArray(l,c.ignorables)}function W(g,k,h,s,f,r,v){o=void 0==v?o:v;if(void 0==h&&R)return!1;R=!0;var D=b(this),g=g||window.event,h=h||g.which||g.charCode||g.keyCode,u=String.fromCharCode(h);c.numericInput&&(u==c.radixPoint&&!0!==k)&&(v=this._valueGet().indexOf(c.radixPoint),B(this,n(-1!=v?v:j())));if((g.ctrlKey||g.metaKey||S)&&!0!==k)return!0;if(h){var y,E;k?(h=f?r:c.numericInput?n(a().p):a().p,y={begin:h,end:h}):
y=B(this);var H=1<y.end-y.begin||1==y.end-y.begin&&c.insertMode,J=!1;H&&(h=e,b.each(d,function(b){e=b;a().undoBuffer=m().join("");b=y.end<j()?y.end:j();F(m(),y.begin,b);var d=j();if(c.greedy==false)o?N(0,b-1,A(b),true):x(y.begin,d);else for(var f=y.begin;f<b;f++)p(f)&&(o?N(0,b-1,A(b-1),true):x(y.begin,d));a().lastValidPosition>y.begin&&a().lastValidPosition<b?a().lastValidPosition=o?n(b):C(y.begin):J=true}),!0===J&&(e=h,G(this,!1,!0,m()),c.insertMode||b.each(d,function(b){e=b;o?x(0,posend):N(y.begin,
j(),A(y.begin),true);a().lastValidPosition=o?C(a().lastValidPosition):n(a().lastValidPosition)})),e=h);if(o){var w=C(y.end),h=l(w,u,f,o);!0===f&&(h=[{activeMasksetIndex:e,result:h}]);b.each(h,function(b,d){e=d.activeMasksetIndex;a().writeOutBuffer=true;var f=d.result;if(f!==false){var g=false,h=m();if(f!==true){g=f.refresh;w=f.pos!=void 0?f.pos:w;u=f.c!=void 0?f.c:u}if(g!==true){var g=j(),k=n(-1),f=k;if(c.insertMode==true){if(a().greedy==true)for(var l=h.slice();K(l,f,true)!=A(f)&&f<=w;)f=f==g?g+
1:n(f);if(f<=w&&(a().greedy||h.length<g||K(h,w)==A(w))){if(h[k]!=A(k)&&h.length<g){h=I(h,-1,o);if((H?y.begin:y.end)!=0)w=w+h}x(f,w,u);h=a().lastValidPosition;f=C(h);h<=w&&K(m(),f)!=A(f)&&(a().lastValidPosition=f)}else a().writeOutBuffer=false}else t(h,w,u,true,o)}a().p=w}})}else w=n(y.begin-1),h=l(w,u,f,o),!0===f&&(h=[{activeMasksetIndex:e,result:h}]),b.each(h,function(b,d){e=d.activeMasksetIndex;a().writeOutBuffer=true;var f=d.result;if(f!==false){var g=false,h=m();if(f!==true){g=f.refresh;w=f.pos!=
void 0?f.pos:w;u=f.c!=void 0?f.c:u}if(g!==true)if(c.insertMode==true){f=j();for(g=h.slice();K(g,f,true)!=A(f)&&f>=w;)f=f==0?-1:C(f);if(f>=w){N(w,h.length,u);h=a().lastValidPosition;f=n(h);f!=j()&&(h>=w&&K(m(),f)!=A(f))&&(a().lastValidPosition=f)}else a().writeOutBuffer=false}else t(h,w,u,true,o);a().p=n(w)}});!0!==f&&q(o);if(!1!==s&&(b.each(h,function(a,b){if(b.activeMasksetIndex==e){E=b;return false}}),void 0!=E)){var M=this;setTimeout(function(){c.onKeyValidation.call(M,E.result,c)},0);if(a().writeOutBuffer&&
!1!==E.result){var L=m();z(this,L,k?void 0:c.numericInput?n(a().p):a().p);setTimeout(function(){Q(L)&&D.trigger("complete")},0)}else H&&(a().buffer=a().undoBuffer.split(""))}c.showTooltip&&D.prop("title",a().mask);g.preventDefault()}}function V(d){var e=b(this),g=d.keyCode,j=m();c.onKeyUp.call(this,d,j,c);g==c.keyCode.TAB&&(e.hasClass("focus.inputmask")&&0==this._valueGet().length&&c.showMaskOnFocus)&&(j=h().slice(),z(this,j),o||B(this,0),a().undoBuffer=this._valueGet())}var v=b(g);if(v.is(":input")){v.data("_inputmask",
{masksets:d,activeMasksetIndex:e,opts:c,isRTL:!1});c.showTooltip&&v.prop("title",a().mask);a().greedy=a().greedy?a().greedy:0==a().repeat;var L=v.prop("maxLength");j()>L&&-1<L&&(L<h().length&&(h().length=L),!1==a().greedy&&(a().repeat=Math.round(L/h().length)),v.prop("maxLength",2*j()));u(g);a().undoBuffer=g._valueGet();var R=!1,S=!1,o=!1;if("rtl"==g.dir||c.numericInput)("rtl"==g.dir||c.numericInput&&c.rightAlignNumerics)&&v.css("text-align","right"),g.dir="ltr",v.removeAttr("dir"),L=v.data("_inputmask"),
L.isRTL=!0,v.data("_inputmask",L),o=!0;v.unbind(".inputmask");v.removeClass("focus.inputmask");v.closest("form").bind("submit",function(){v[0]._valueGet&&v[0]._valueGet()!=a().undoBuffer&&v.change()});v.bind("mouseenter.inputmask",function(){!b(this).hasClass("focus.inputmask")&&c.showMaskOnHover&&this._valueGet()!=m().join("")&&z(this,m())}).bind("blur.inputmask",function(){var g=b(this),k=this._valueGet(),l=m();g.removeClass("focus.inputmask");k!=a().undoBuffer&&g.change();c.clearMaskOnLostFocus&&
k!=""&&(k==h().join("")?this._valueSet(""):J(this));if(!Q(l)){g.trigger("incomplete");if(c.clearIncomplete){b.each(d,function(a,b){b.buffer=b._buffer.slice();b.lastValidPosition=void 0;b.p=o?j():0});e=0;if(c.clearMaskOnLostFocus)this._valueSet("");else{l=h().slice();z(this,l)}}}}).bind("focus.inputmask",function(){var d=b(this),e=this._valueGet();c.showMaskOnFocus&&!d.hasClass("focus.inputmask")&&(!c.showMaskOnHover||c.showMaskOnHover&&e=="")&&this._valueGet()!=m().join("")&&z(this,m(),a().p);d.addClass("focus.inputmask");
a().undoBuffer=this._valueGet();d.click()}).bind("mouseleave.inputmask",function(){var a=b(this);c.clearMaskOnLostFocus&&(a.hasClass("focus.inputmask")||(this._valueGet()==h().join("")||this._valueGet()==""?this._valueSet(""):J(this)))}).bind("click.inputmask",function(){var d=this;setTimeout(function(){var e=B(d),g=m();if(e.begin==e.end){var h=e.begin,f=a().lastValidPosition;M(d,e);if(o){e=c.numericInput?c.skipRadixDance===false&&c.radixPoint!=""&&b.inArray(c.radixPoint,g)!=-1?b.inArray(c.radixPoint,
g):j():C((f==void 0?j():f)+1);B(d,h>e&&(l(h,g[h],true,o)!==false||!p(h))?h:e)}else{e=n(f==void 0?-1:f);B(d,h<e&&(l(h,g[h],true,o)!==false||!p(h))?h:e)}}},0)}).bind("dblclick.inputmask",function(){var b=this;a().lastValidPosition!=void 0&&setTimeout(function(){o?B(b,C(a().lastValidPosition),j()):B(b,0,n(a().lastValidPosition))},0)}).bind("keydown.inputmask",P).bind("keypress.inputmask",W).bind("keyup.inputmask",V).bind(Y+".inputmask dragdrop.inputmask drop.inputmask",function(){var a=this,c=b(a);setTimeout(function(){G(a,
true,false);Q(m())&&c.trigger("complete");c.click()},0)}).bind("setvalue.inputmask",function(){a().undoBuffer=this._valueGet();G(this,true);this._valueGet()==h().join("")&&this._valueSet("")}).bind("complete.inputmask",c.oncomplete).bind("incomplete.inputmask",c.onincomplete).bind("cleared.inputmask",c.oncleared);G(g,!0,!1);var T;try{T=document.activeElement}catch(Z){}T===g?(v.addClass("focus.inputmask"),B(g,a().p)):c.clearMaskOnLostFocus?m().join("")==h().join("")?g._valueSet(""):J(g):z(g,m());E(g)}};
return this}var c=b.extend(!0,{},b.inputmask.defaults,E),I=null!==navigator.userAgent.match(/msie 10/i),X=null!==navigator.userAgent.match(/iphone/i),P=null!==navigator.userAgent.match(/android.*safari.*/i),Y=function(b){var c=document.createElement("input"),b="on"+b,a=b in c;a||(c.setAttribute(b,"return;"),a="function"==typeof c[b]);return a}("paste")&&!I?"paste":"input",U,t,z=0;P&&(I=navigator.userAgent.match(/safari.*/i),U=537>=parseInt(RegExp(/[0-9]+/).exec(I)));if("string"===typeof D)switch(D){case "mask":return F(c.alias,
E),t=M(),this.each(function(){H(b.extend(true,{},t),0).mask(this)});case "unmaskedvalue":return I=b(this),I.data("_inputmask")?(t=I.data("_inputmask").masksets,z=I.data("_inputmask").activeMasksetIndex,c=I.data("_inputmask").opts,H(t,z).unmaskedvalue(I)):I.val();case "remove":return this.each(function(){var d=b(this),e=this;setTimeout(function(){if(d.data("_inputmask")){t=d.data("_inputmask").masksets;z=d.data("_inputmask").activeMasksetIndex;c=d.data("_inputmask").opts;e._valueSet(H(t,z).unmaskedvalue(d,
true));d.removeData("_inputmask");d.unbind(".inputmask");d.removeClass("focus.inputmask");var a;Object.getOwnPropertyDescriptor&&(a=Object.getOwnPropertyDescriptor(e,"value"));if(a&&a.get)e._valueGet&&Object.defineProperty(e,"value",{get:e._valueGet,set:e._valueSet});else if(document.__lookupGetter__&&e.__lookupGetter__("value")&&e._valueGet){e.__defineGetter__("value",e._valueGet);e.__defineSetter__("value",e._valueSet)}delete e._valueGet;delete e._valueSet}},0)});case "getemptymask":return this.data("_inputmask")?
(t=this.data("_inputmask").masksets,z=this.data("_inputmask").activeMasksetIndex,t[z]._buffer.join("")):"";case "hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case "isComplete":return t=this.data("_inputmask").masksets,z=this.data("_inputmask").activeMasksetIndex,c=this.data("_inputmask").opts,H(t,z).isComplete(this[0]._valueGet().split(""));default:return F(D,E)||(c.mask=D),t=M(),this.each(function(){H(b.extend(true,{},t),z).mask(this)})}else{if("object"==
typeof D)return c=b.extend(!0,{},b.inputmask.defaults,D),F(c.alias,D),t=M(),this.each(function(){H(b.extend(true,{},t),z).mask(this)});if(void 0==D)return this.each(function(){var d=b(this).attr("data-inputmask");if(d&&d!="")try{var d=d.replace(RegExp("'","g"),'"'),e=b.parseJSON("{"+d+"}");b.extend(true,e,E);c=b.extend(true,{},b.inputmask.defaults,e);F(c.alias,e);c.alias=void 0;b(this).inputmask(c)}catch(a){}})}return this})})(jQuery);
